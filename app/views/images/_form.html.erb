<%= form_for(image, :html => { :multipart => true }) do |f| %> 
  <% if image.errors.any? %>
    <div id="error_explanation">
      <h2>
        <%= pluralize(image.errors.count, "error") %> prohibited this image from
        being saved:
      </h2>
      <ul>
        <% image.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="btn-group btn-block">
    <%= f.button "저장", type: :submit, class: "btn btn-primary" %>
    <%= link_to '삭제', image, method: :delete, data: { confirm: '이미지를 삭제하시겠습니까?' }, class: "btn btn-danger" %>
    <% if image.crop_x.present? %>
      <%= link_to "크롭수정", crop_image_path(image), id: "cropEditBtn", class: "btn btn-success" %>
    <% else %>
      <%= link_to "크롭", crop_image_path(image), id: "cropCreateBtn", class: "btn btn-success" %>
    <% end %>
  </div>
  <div class="form-group">
    <div class="custom-file">
      <%= f.file_field :storage_image, class: "custom-file-input", id: "customFileLangHTML" %>
      <%= f.label :storage_image, class: "custom-file-label", for: "customFileLangHTML", data: {browse: "첨부파일"} %>
    </div>
  </div>
  <div class="form-group mt-3 p-3 border shadow-sm">            
    <% if image.storage_image.attached? %>
      <!-- %= image_tag image.image.url, style: "padding-bottom:20px" % -->
      <%= image_tag image.storage_image, :width => "100%", :height => "200px", style: "object-fit: contain; height: 15em !important;", id: "preview" %>
    <% else%>
      <%= image_tag image.empty_image_url, :width => "100%", style: "padding-bottom:20px" %>
    <% end %>
    <p class="text-center mb-0">이미지 사이즈: <%= image.size_string %></p>
  </div>
  <div class="form-row mt-3">
    <div class="form-group col-md-6">
      <%= f.label "종류: " %> <%= f.select :image_kind, %w[일반 인물_좌 인물_우
      그룹], {include_blank: false}, {onChange: 'this.form.submit();', class: "form-control"} %>
      <!-- %= f.submit "사진정보 저장", class: "btn btn btn-xs" % -->
    </div>
    <div class="form-group col-md-6">
      <%= f.label "사진 정렬:" %><%= f.select :fit_type, %w[최적 가로 세로 욱여넣기], {include_blank: false}, class: "form-control" %>
    </div>
  </div>
  <div class="form-check form-check-inline mt-3">
    <%= f.check_box :not_related, class: "form-check-input" %>
    <%= f.label "기사와 관련없는 사진", class: "form-check-label" %>
  </div>
  <div class="form-check form-check-inline">
    <%= f.check_box :draw_frame, class: "form-check-input" %>
    <%= f.label "테두리선 추가:", class: "form-check-label" %>
  </div>
  <div class="form-row">
    <% if @working_article.kind != '사진' %>
      <div class="form-group col-md-12 border mt-3 p-3 shadow-sm" style="width: 100px; float: left;">
        <%= f.label "위치 설정:" %>
        <div style="font-size: 13px;" class="text-center">
          <%= f.radio_button :position, 10, title: "제목위", disabled: "disabled" %>
          <%= f.radio_button :position, 0, title: "제목위" %>
          <%= f.radio_button :position, 10, title: "제목위", disabled: "disabled" %><br />
          <%= f.radio_button :position, 1, title: "좌상단" %>
          <%= f.radio_button :position, 2, title: "중상단" %>
          <%= f.radio_button :position, 3, title: "우상단" %><br />
          <%= f.radio_button :position, 4, title: "좌" %>
          <%= f.radio_button :position, 5, title: "중앙" %>
          <%= f.radio_button :position, 6, title: "우" %><br />
          <%= f.radio_button :position, 7, title: "좌하단"%>
          <%= f.radio_button :position, 8, title: "중하단" %>
          <%= f.radio_button :position, 9, title: "우하단" %><br />
        </div>
      </div>
    <% end %>
  </div>
  <% if @working_article.kind != '사진' %>
    <div class="form-group mt-3">
      <%= f.label "가로시작 단:" %>
      <%= f.text_field :x_grid, class: 'form-control' %>
    </div>
    <div class="form-inline mt-3">
      <%= f.label "사이즈 설정:" %>
      <%= f.text_field :column, style: "width: 35px;", class: 'form-control' %> 단 x
      <%= f.text_field :row, style: "width: 35px", class: 'form-control' %>열
      <%= f.text_field :extra_height_in_lines, style: "width: 35px", class: 'form-control' %>행 추가
    </div>
  <% end %>
  <div class="form-group mt-3">
    <%= f.text_field :caption_title, placeholder: "사진 제목을 입력해주십시오", class:'form-control', autocomplete: 'off' %> 
  </div>
  <div class="form-group mt-3">
    <%= f.text_area :caption, font_size: "12px", placeholder: "사진 설명을 입력해주십시오", class: 'form-control' , style: "height: 350px;", autocomplete: 'off' %>
  </div>
  <div class="form-group mt-3">
    <%= f.text_field :source, placeholder: "사진출처", class: 'form-control', autocomplete: 'off' %>
  </div>
  <div class="form-group">
    <div class="btn-group btn-block">
      <%= f.button "저장", type: :submit, class: "btn btn-primary" %>
      <%= link_to '삭제', image, method: :delete, data: { confirm: '이미지를 삭제하시겠습니까?' }, class: "btn btn-danger" %>
    </div>
  </div>
  <hr>
  <!-- 편집화면 하단에 자주쓰는 이전, 저장, 다운 버튼을 항상 보이게 설정 -->
  <nav class="navbar navbar-default navbar-fixed-bottom">
    <div class="btn-group" role="group" aria-label="기능">
      <%= link_to "교정 전송", send_proof_reading_pdf_page_path(@working_article.page), method: :get, data: { confirm: '정말 보내시겠습니까?'}, class: "btn btn-default btn-sm" %>
      <%= link_to "인쇄 전송", send_pdf_to_printer_page_path(@working_article.page), method: :get, data: { confirm: '정말 보내시겠습니까?'}, class: "btn btn-default btn-sm" %>
      <%= link_to "페이지 PDF", download_pdf_page_path(@working_article.page), method: :get, class: "btn btn-default btn-sm" %>
      <%= link_to "기사 PDF", download_pdf_working_article_path(@working_article), method: :get, class: "btn btn-default btn-sm" %>
    </div>
    <hr>
    <div class="btn-group btn-right" role="group" aria-label="기능">
      <%= f.button "저장", accesskey: "s", class: "btn btn-primary btn-sm", remote: true, data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> 처리중..."} %>
    </div>
  </nav>
<% end %>
